#### 1ã€æ‰“åŒ… UMD SDK ç¬¬ä¸‰æ–¹åº”ç”¨ç‰ˆæœ¬

`npm run build`

###### 1ã€è¿›å…¥åˆ° electron-app/tsbSdk ä¸­æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤

###### 2ã€SDK æ–‡ä»¶æ”¯æŒ ES Moduleã€CommonJSã€AMD çš„è°ƒç”¨

###### 3ã€ç›®å‰é¢„ç•™äº†(æ”¯æŒ sdk é‰´æƒçš„è®¾è®¡)ï¼Œåç»­éœ€é…åˆåç«¯å®Œå–„ï¼Œå·²ç»æ”¯æŒç»­ç­¾é‰´æƒ jsapi_ticket

###### 4ã€è®¾è®¡å¤§è‡´å‚è€ƒ[å¾®ä¿¡ JSSDK](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html#1)

###### 5ã€åœ¨ç±»ä¼¼ Vue çš„ SPA å•é¡µé¢é¡¹ç›®ä¸­ä½¿ç”¨éœ€æ³¨æ„ï¼šè¦ä½¿ç”¨ tsb-SDK çš„é¡µé¢å¿…é¡»å…ˆæ³¨å…¥ config é…ç½®ä¿¡æ¯ï¼Œå¦åˆ™å°†æ— æ³•è°ƒç”¨ã€‚å¦‚éœ€å…¨å±€åº”ç”¨ï¼Œä¾‹å¦‚ Vue é¡¹ç›®ä¸­åœ¨ mixin æˆ– main æ–‡ä»¶ä¸­çš„ created æ–¹æ³•ä¸­é¢„å…ˆæ³¨å…¥ config é‰´æƒé…ç½®ä¿¡æ¯ï¼Œåœ¨å…¶ä»–é¡µé¢æ–‡ä»¶ä¸­å°±æ— éœ€é‡å¤æ³¨å…¥ã€‚

###### 6ã€åœ¨ html æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨éœ€æ³¨æ„ï¼šscript æ ‡ç­¾ä¸­å¼•å…¥ sdkï¼Œåœ¨ window.onload æ–¹æ³•ä¸ŠæŒ‚ä¸Š tsbk.default.config é…ç½®ä¿¡æ¯ã€‚å…·ä½“æ–¹æ³•çš„è°ƒç”¨åœ¨ tsbk.default.ready()è°ƒç”¨æ—¶ä¼ å…¥å…·ä½“çš„å›è°ƒæ‰§è¡Œæ–¹æ³•

###### 7ã€æ‰€æœ‰çš„ sdk æ–¹æ³•éƒ½å·²åŒ…è£…æˆä¸€ä¸ª Promiseï¼Œæ”¯æŒé“¾å¼å›è°ƒæ‰§è¡Œã€‚

###### 8ã€å®Œå–„åå»ºåŒ…å‘å¸ƒ npm

#### 2ã€é‰´æƒéƒ¨åˆ†è®¾è®¡

> - å¾®ä¿¡ jssdk æ˜¯åŒä¸€ä¸ª url ä»…éœ€è°ƒç”¨ä¸€æ¬¡ï¼Œå¯¹äºå˜åŒ– url çš„ SPA çš„ web app å¯åœ¨æ¯æ¬¡ url å˜åŒ–æ—¶è¿›è¡Œè°ƒç”¨ï¼Œæˆ‘ä»¬è®¾è®¡æˆåŒä¸€ä¸ª origin ä»…éœ€è°ƒç”¨ä¸€æ¬¡
> - åæœŸç»™ç¬¬ä¸‰æ–¹åº”ç”¨ä¸€ä¸ªæ¥å£è°ƒå– jsapi_ticketï¼ˆæœ‰æ•ˆæœŸ 7200 ç§’ï¼Œå¼€å‘è€…å¿…é¡»åœ¨è‡ªå·±çš„æœåŠ¡å…¨å±€ç¼“å­˜ jsapi_ticketï¼‰
> - jsapi_ticket è·å–åï¼Œå»ç”Ÿæˆ tsb-SDK æƒé™éªŒè¯çš„ç­¾å
> - ç­¾åç”Ÿæˆè§„åˆ™å¦‚ä¸‹ï¼šå‚ä¸ç­¾åçš„å­—æ®µåŒ…æ‹¬ noncestrï¼ˆéšæœºå­—ç¬¦ä¸²ï¼‰, æœ‰æ•ˆçš„ jsapi_ticket, timestampï¼ˆæ—¶é—´æˆ³ï¼‰, urlï¼ˆç¬¬ä¸‰æ–¹å¼€å‘å•†ç½‘ç«™çš„ Originï¼‰
> - å¯¹æ‰€æœ‰å¾…ç­¾åå‚æ•°æŒ‰ç…§å­—æ®µåçš„ ASCII ç ä»å°åˆ°å¤§æ’åºï¼ˆå­—å…¸åºï¼‰åï¼Œä½¿ç”¨ URL é”®å€¼å¯¹çš„æ ¼å¼ï¼ˆå³ key1=value1&key2=value2â€¦ï¼‰æ‹¼æ¥æˆå­—ç¬¦ä¸² string
> - å¯¹ string è¿›è¡Œ sha1 ç­¾åï¼Œå¾—åˆ° signature

#### 3ã€ä½¿ç”¨è¯´æ˜ ğŸ“–

##### æ­¥éª¤ä¸€ã€ğŸ’¥ å¼•å…¥ tsbSdk

`import tsbk from è·¯å¾„åœ°å€` ES module å¼•å…¥
`<script src="è·¯å¾„æ–‡ä»¶"></script>` script æ ‡ç­¾å¼•å…¥ â—ï¸ å¯¹è±¡åœ¨å…¨å±€ tsbk.default ä¸­
###### demo
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <script src="./tsbSdk.js"></script>
  </head>
  <body>
    <button id="test22">æµ‹è¯•sdkæŒ‰é”®</button>
    <script>
      window.onload = () => {
        tsbk.default.config({
          signature: "ts",
        });
      };
    </script>
  </body>
  <script>
    var button22 = document.getElementById("test22");

    button22.onclick = () => {
      tsbk.default.ready(() => {
        tsbk.default
          .getUserProfile()
          .then((res) => {
            console.log(res, "res!!!");
          })
          .catch((err) => {
            console.log(err, "err!!!");
          });
      });
    };
  </script>
</html>
```

##### æ­¥éª¤äºŒã€ğŸ’¥ é€šè¿‡ config æ¥å£æ³¨å…¥æƒé™éªŒè¯é…ç½®

ç¬¬ä¸‰æ–¹åº”ç”¨éœ€è¦ä½¿ç”¨ tsb-SDK çš„é¡µé¢å¿…é¡»å…ˆæ³¨å…¥ config é…ç½®ä¿¡æ¯ï¼Œå¦åˆ™å°†æ— æ³•è°ƒç”¨ã€‚å¯¹äºå˜åŒ– url çš„ SPA çš„ web app å¯åœ¨æ¯æ¬¡ url å˜åŒ–æ—¶æ³¨å…¥ config é…ç½®ä¿¡æ¯ã€‚

```
tsbk.config({
  appId: '', // å¿…å¡«ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨çš„å”¯ä¸€æ ‡è¯†
  timestamp: , // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³
  nonceStr: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²
  signature: '',// å¿…å¡«ï¼Œç­¾å
  jsApiList: [] // å¿…å¡«ï¼Œéœ€è¦ä½¿ç”¨çš„JSæ¥å£åˆ—è¡¨
})
```

ğŸ‘€ ğŸ’—ç›®å‰åªéœ€è¦å¦‚ä¸‹å³å¯(å®é™…æ£€éªŒåŠŸèƒ½æœªå®Œæˆ)

```
tsbk.config({
  signature: "ts"
})
```

##### æ­¥éª¤ä¸‰ã€ğŸ’¥ é€šè¿‡ ready,error æ¥å£å¤„ç†éªŒè¯

```
#readyæ¥å£å¤„ç†æˆåŠŸéªŒè¯
wx.ready(function(){
  // configä¿¡æ¯éªŒè¯åä¼šæ‰§è¡Œreadyæ–¹æ³•ï¼Œæ‰€æœ‰æ¥å£è°ƒç”¨éƒ½å¿…é¡»åœ¨configæ¥å£è·å¾—ç»“æœä¹‹åï¼Œconfigæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„å¼‚æ­¥æ“ä½œï¼Œä»»ä½•sdkæ¥å£çš„è°ƒç”¨ï¼Œé¡»æŠŠç›¸å…³æ¥å£æ”¾åœ¨readyå‡½æ•°ä¸­è°ƒç”¨æ¥ç¡®ä¿æ­£ç¡®æ‰§è¡Œã€‚
})
```

```
#erroræ¥å£å¤„ç†å¤±è´¥éªŒè¯
wx.error(function(res){
  // configä¿¡æ¯éªŒè¯å¤±è´¥ä¼šæ‰§è¡Œerrorå‡½æ•°ï¼Œé”™è¯¯å¯ä»¥åœ¨è¿”å›çš„reså‚æ•°ä¸­æŸ¥çœ‹ï¼Œå¯¹äºSPAå¯ä»¥åœ¨è¿™é‡Œæ›´æ–°ç­¾åã€‚
})

```

#### 4ã€æ¥å£è°ƒç”¨è¯´æ˜ ğŸ“–

##### ğŸ¤” é€šç”¨å‚æ•°ï¼Œå¯é€‰

æ‰€æœ‰æ¥å£é€šè¿‡ tsbk å¯¹è±¡æ¥è°ƒç”¨ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé™¤äº†æ¯ä¸ªæ¥å£æœ¬èº«éœ€è¦ä¼ çš„å‚æ•°ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹é€šç”¨å‚æ•°ï¼š

> - successï¼šæ¥å£è°ƒç”¨æˆåŠŸæ—¶æ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚
> - failï¼šæ¥å£è°ƒç”¨å¤±è´¥æ—¶æ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚

##### ä¸€ã€ğŸ§Š éšè—ç¬¬ä¸‰æ–¹åº”ç”¨(åå°å¸¸é©») hideApp æ–¹æ³•

ç¤ºä¾‹

```
tsbk.ready(function() {
  tsbk.hideApp()
})
```

##### äºŒã€ğŸ§Š æ–°å¯åŠ¨ä¸€ä¸ªæŒ‡å®š url çš„æ ‡ç­¾é¡µ tabLinkJump æ–¹æ³•

###### å‚æ•°: 1ã€å¿…å¡«ã€url: Stringã€‘

ç¤ºä¾‹

```
tsbk.ready(function() {
  tsbk.tabLinkJump({
    url: 'https://s.apps.vip/user/account-info'
  })
})

```

##### ä¸‰ã€ğŸ§Š é”€æ¯ç¬¬ä¸‰æ–¹åº”ç”¨ destoryApp æ–¹æ³•

ç¤ºä¾‹

```
tsbk.ready(function() {
  tsbk.destoryApp()
})
```

##### å››ã€ğŸ§Š ç³»ç»Ÿæ¶ˆæ¯æç¤º

###### å‚æ•°: 1ã€å¿…å¡«ã€title: Stringã€‘æ¶ˆæ¯æ ‡é¢˜

###### å‚æ•°: 2ã€å¿…å¡«ã€body: Stringã€‘æ¶ˆæ¯å†…å®¹

###### å‚æ•°: 3ã€å¿…å¡«ã€category: Stringã€‘æ¶ˆæ¯ç±»å‹ (lumen å­˜åœ¨ä»¥ä¸‹ï¼šã€èŠå¤©ã€å…¥ç¾¤é‚€è¯·ã€å¥½å‹ç”³è¯·ã€‘ï¼ŒçŸ­è¯´å­˜åœ¨ä»¥ä¸‹ï¼šã€äº’åŠ¨æ¶ˆæ¯ã€å…³æ³¨æ¶ˆæ¯ã€åº”ç”¨æ¶ˆæ¯ã€‘)

ç¤ºä¾‹

```
tsbk.ready(function() {
  tsbk.notice({
    title: 'æ ‡é¢˜',
    body: 'æ¶ˆæ¯å†…å®¹',
    category: 'å¥½å‹ç”³è¯·'
  })
})
```

##### äº”ã€ğŸ§Š æƒ³å¤©å†…ç½®åº”ç”¨çš„å…ç™»

ç¤ºä¾‹

```
tsbk.ready(function() {
  tsbk.autoLoginSysApp()
})
```

##### å…­ã€ğŸ§Š å”¤é†’æƒ³å¤©å†…ç½®åº”ç”¨ã€ä»…æ”¯æŒåå°ä¼‘çœ çš„å†…ç½®åº”ç”¨ã€‘

###### å‚æ•°: 1ã€å¿…å¡«ã€appName: Stringã€‘,ç›®å‰æƒ³å¤©å†…ç½®åº”ç”¨åå•ã€å›¢é˜Ÿåä½œã€å…ƒç¤¾åŒºã€æ”¶è—å¤¹ã€å¯¼å…¥åŠ©æ‰‹ã€‘

###### å‚æ•°ï¼š2ã€å¯é€‰ã€url: Stringã€‘ï¼Œå†…ç½®åº”ç”¨è·³è½¬é“¾æ¥ path å’Œ parameters ç»„æˆéƒ¨åˆ†(ä¸åŒ…å«ç¬¬ä¸€ä¸ª'/')ï¼Œç›®å‰ä»…æ”¯æŒå…ƒç¤¾åŒºå’Œå›¢é˜Ÿåä½œçš„è·³è½¬

ç¤ºä¾‹

```
tsbk.ready(function() {
  tsbk.openSysApp({
    appName: 'å›¢é˜Ÿåä½œ',
    url: '?fid=xxxxxxx'
  })
})
```

##### ä¸ƒã€ğŸ§Š åˆ›å»ºçŸ­è¯´åœˆå­é‚€è¯·é“¾æ¥çª—ä½“

###### å‚æ•°: 1ã€å¿…å¡«ã€groupId: Numberã€‘,åœˆå­çš„ id

ç¤ºä¾‹

```
tsbk.ready(function() {
  tsbk.openOsxInviteMember({
    groupId: 424
  })
})
```

##### å…«ã€ğŸ§Š è·å–æµè§ˆå™¨ç”¨æˆ·ä¿¡æ¯

###### å‚æ•°: æ—  è¿”å›:Promise

ç¤ºä¾‹

```
tsbk.ready(() => {
  tsbk.getUserProfile().then(res => {
    //res è¿”å›çš„ç”¨æˆ·ä¿¡æ¯
    //do something
  }).catch(err => {
    //do something
  })
})
```


### ã€æ­¤éƒ¨åˆ†å†…å®¹æ˜¯å¹³å°ä¾§çš„çŸ¥è¯†ç‚¹ï¼Œåº”ç”¨ä¾§å¼€å‘æ— éœ€é˜…è¯»ã€‘

> 1ã€tsbSdk.listener()ç›‘å¬è€…æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ
>
> - ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ï¼Œä¸º saApp åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯
> - ç¬¬äºŒä¸ªå‚æ•°æ˜¯éå¿…é¡»çš„ï¼Œä¸º DepList è®¢é˜…å™¨æ”¶é›†ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ”¯æŒå¾€è®¢é˜…å™¨ä¸­æ³¨å…¥ä¸€ä¸ªä¸ªè®¢é˜…å¯¹è±¡ï¼Œä¾æ®å…·ä½“æƒ…å†µæ‰§è¡Œè®¢é˜…
